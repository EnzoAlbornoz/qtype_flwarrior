<XMLDB PATH="question/type/flwarrior/db" VERSION="20210628" COMMENT="XMLDB file for Moodle question/type/flwarrior">
  <TABLES>
    <TABLE NAME="question_flwarrior_machine" COMMENT="Store a machine entity core">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="question_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="type" TYPE="char" LENGTH="3" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="question_id" TYPE="foreign" FIELDS="question_id" REFTABLE="question" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="question_flwarrior_m_state" COMMENT="States belonging to machines">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="machine_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="is_entry" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="1" SEQUENCE="false"/>
        <FIELD NAME="is_exit" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="1" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="machine_id" TYPE="foreign" FIELDS="machine_id" REFTABLE="question_flwarrior_machine" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="question_flwarrior_m_symbol" COMMENT="Symbols that form an alphabet of a machine">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="machine_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="type" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="symbol" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="machine_id" TYPE="foreign" FIELDS="machine_id" REFTABLE="question_flwarrior_machine" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="question_flwarrior_m_trans" COMMENT="The transition between states, with their side-effects">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="machine_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="from_state_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="with_head_symbol_id" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="with_memory_symbol_id" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="to_state_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="write_symbol_id" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="head_direction" TYPE="char" LENGTH="1" NOTNULL="false" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="machine_id" TYPE="foreign" FIELDS="machine_id" REFTABLE="question_flwarrior_machine" REFFIELDS="id"/>
        <KEY NAME="from_state_id" TYPE="foreign" FIELDS="from_state_id" REFTABLE="question_flwarrior_m_state" REFFIELDS="id"/>
        <KEY NAME="to_state_id" TYPE="foreign" FIELDS="to_state_id" REFTABLE="question_flwarrior_m_state" REFFIELDS="id"/>
        <KEY NAME="with_head_symbol_id" TYPE="foreign" FIELDS="with_head_symbol_id" REFTABLE="question_flwarrior_m_symbol" REFFIELDS="id"/>
        <KEY NAME="with_memory_symbol_id" TYPE="foreign" FIELDS="with_memory_symbol_id" REFTABLE="question_flwarrior_m_symbol" REFFIELDS="id"/>
        <KEY NAME="write_symbol_id" TYPE="foreign" FIELDS="write_symbol_id" REFTABLE="question_flwarrior_m_symbol" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="qtype_flwarrior_tests" COMMENT="Stores question tests">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="question_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="word" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="should_match" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="1" SEQUENCE="false"/>
        <FIELD NAME="max_iterations" TYPE="int" LENGTH="15" NOTNULL="true" DEFAULT="1000" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="question_id" TYPE="foreign" FIELDS="question_id" REFTABLE="question" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
  </TABLES>
</XMLDB>
